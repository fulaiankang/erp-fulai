# 阿里云函数计算部署指南

## 🚀 为什么选择阿里云？
- ✅ 稳定可靠，不会有API网关停服问题
- ✅ 支持支付宝、微信支付，无需信用卡
- ✅ 免费额度充足：每月100万次调用
- ✅ 中国访问速度快
- ✅ 企业级服务，适合正式业务

## 📋 部署步骤

### 步骤1：注册阿里云账号
1. 访问 [www.aliyun.com](https://www.aliyun.com)
2. 注册账号（手机号即可）
3. 完成实名认证
4. 开通函数计算服务

### 步骤2：通过控制台部署（推荐）

#### 方式A：应用中心部署
1. 登录阿里云控制台
2. 搜索"函数计算"
3. 进入"应用中心"
4. 选择"Web应用" → "Express.js"
5. 连接GitHub仓库
6. 配置环境变量

#### 方式B：直接创建函数
1. 进入函数计算控制台
2. 创建服务：erp-fulai-service
3. 创建函数：选择"HTTP函数"
4. 运行环境：Node.js 16
5. 上传代码包（ZIP格式）

### 步骤3：配置环境变量
```
NODE_ENV=production
JWT_SECRET=Gp6uzUi3q5+z2voi1ZGHR2PCoyLzu/jI0p9wqmQnjXI=
PORT=9000
```

### 步骤4：获取访问URL
- 部署完成后，阿里云会提供HTTP触发器URL
- 格式：https://your-function-id.cn-hangzhou.fc.aliyuncs.com

## 🔧 代码准备

### 构建前端
```bash
cd client
npm run build
```

### 准备部署包
1. 确保前端已构建（client/dist目录存在）
2. 确保所有依赖已安装
3. 准备ZIP压缩包

## 💰 费用说明
- 免费额度：每月100万次调用 + 40万CU-秒计算时长
- 超出后费用：约0.0000017元/次调用
- 对于小型ERP系统，基本用不完免费额度

## 🔧 自定义域名（可选）
如果需要自定义域名：
1. 在函数计算控制台添加自定义域名
2. 配置CNAME解析
3. 可以使用 www.yourcompany.com 访问ERP系统

## 🆘 常见问题

### Q: 部署失败怎么办？
A: 检查代码包是否正确，确保所有依赖文件都在包中

### Q: 图片无法显示？
A: 阿里云函数计算是无状态的，建议使用OSS存储图片

### Q: 数据库连接问题？
A: SQLite在函数计算中会重置，建议迁移到RDS或MongoDB

## 🎯 下一步建议
1. 完成阿里云部署
2. 测试所有功能
3. 配置图片存储到OSS
4. 迁移数据库到云数据库

## 📱 移动端访问
- 自动响应式设计
- 支持手机、平板访问
- 全球CDN加速

---
**部署完成后，您的ERP系统就可以在全球任何地方访问了！** 🌍

